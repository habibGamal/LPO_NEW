import{u as A,a as e,j as r,F as f,ai as C,aj as v,c as V,d as I,ak as _}from"./app.c0eb73c4.js";import{f as k,a as F,V as N,b as S}from"./VideosScreen.9d9d5e07.js";import{A as b,b as P}from"./Assets.4426f7a3.js";import{u as E,M as q}from"./useModal.c43a16a3.js";import D from"./Layout.50f9c959.js";import{E as M}from"./index.c16e51ad.js";import{T as L}from"./index.08210a69.js";import{B as m}from"./button.c7f49c64.js";import{F as t}from"./index.e739e818.js";import{I as l}from"./index.be15e5bc.js";import{D as x}from"./index.82e8fcc5.js";import{M as T}from"./MinusCircleOutlined.6fdc13fc.js";import{P as w}from"./PlusOutlined.f4534323.js";import"./ImagesHandler.e7d6fa9d.js";import"./ActionButton.93b03483.js";import"./motion.eed35d4e.js";import"./type.5dc8de91.js";import"./getScrollBarSize.001053fa.js";import"./KeyCode.bb3c3291.js";import"./pickAttrs.03cc987b.js";import"./styleChecker.22072b6c.js";import"./SectionTitle.42238b7d.js";import"./Dropdown.b1d0e8dc.js";import"./index.92e459fd.js";import"./index.91c2c988.js";import"./Overflow.651c6bf1.js";const O=({assets:d})=>{const[n]=t.useForm(),{errors:s}=V().props,p=a=>{I.Inertia.post(b.insertVideos(),{...a,name:d.name,assets_type:d.assetsType},{onSuccess:()=>{n.resetFields(),_.success("Data uploaded Successfuly")}})};return console.log(s),r("div",{className:"rounded bg-slate-50 shadow-sm p-4 my-16",children:[r("span",{className:"mb-4 block",children:[e(v,{icon:S})," Add new group video"]}),r(t,{form:n,name:"add_new_assets",className:"max-w-[500px] mx-auto",initialValues:{remember:!0},onFinish:p,autoComplete:"off",method:"post",encType:"multipart/form-data",children:[e(t.Item,{name:"group_name",rules:[{required:!0,message:"Please insert the name of the group"}],children:e(l,{placeholder:"Group Name"})}),e(t.Item,{name:"playlist_id",validateStatus:(s==null?void 0:s.playlist_id)&&"error",help:s==null?void 0:s.playlist_id,children:e(l,{placeholder:"Playlist id"})}),e(x,{}),e(t.List,{name:"videos",children:(a,{add:y,remove:o},{errors:c})=>r(f,{children:[a.map((i,u)=>r(t.Item,{label:`Video no ${u+1}`,required:!0,children:[e(t.Item,{...i,validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,message:"Please input embed code here"}],noStyle:!0,children:e(l.TextArea,{placeholder:"Embed code",style:{width:"80%"}})}),e(T,{className:"dynamic-delete-button mx-2",onClick:()=>o(i.name)})]},i.key)),r(t.Item,{wrapperCol:{offset:6,span:16},children:[e(m,{type:"dashed",onClick:()=>y(),icon:e(w,{}),children:"Add video"}),e(t.ErrorList,{errors:c})]})]})}),e(t.Item,{children:e(m,{type:"primary",htmlType:"submit",children:"Submit"})})]})]})},j=({group:d,name:n,close:s})=>{const[p]=t.useForm(),{errors:a}=V().props;return r(t,{form:p,name:"edit_videos",className:"max-w-[500px] mx-auto",initialValues:{remember:!0},onFinish:o=>{I.Inertia.post(b.editVideos(),{...o,group_id:d.id,name:n,assets_type:P.videos},{onSuccess:()=>{p.resetFields(),_.success("Data uploaded Successfuly"),s()}})},autoComplete:"off",method:"post",encType:"multipart/form-data",children:[e(t.Item,{name:"group_name",initialValue:d.name,rules:[{required:!0,message:"Please insert the name of the group"}],children:e(l,{placeholder:"Group Name"})}),e(t.Item,{name:"playlist_id",validateStatus:(a==null?void 0:a.playlist_id)&&"error",help:a==null?void 0:a.playlist_id,children:e(l,{placeholder:"Playlist id"})}),e(x,{}),e(t.List,{name:"videos",initialValue:d.videos,children:(o,{add:c,remove:i},{errors:u})=>r(f,{children:[o.map((h,g)=>r(t.Item,{label:`Video no ${g+1}`,required:!0,children:[e(t.Item,{...h,validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,message:"Please input embed code here"}],noStyle:!0,children:e(l.TextArea,{placeholder:"Embed code",style:{width:"80%"}})}),e(T,{className:"dynamic-delete-button mx-2",onClick:()=>i(h.name)})]},h.key)),r(t.Item,{wrapperCol:{offset:6,span:16},children:[e(m,{type:"dashed",onClick:()=>c(),icon:e(w,{}),children:"Add video"}),e(t.ErrorList,{errors:u})]})]})}),e(t.Item,{children:e(m,{type:"primary",htmlType:"submit",children:"Submit Changes"})})]})};function ce({assetsDB:d}){A();const[{isOpen:n,data:s},p,a,y]=E(),o=new b(d),c=i=>I.Inertia.post(b.removeVideos(),{group_id:i.id,name:o.name,assets_type:o.assetsType});return e(D,{children:r(f,{children:[e(C,{children:e(O,{assets:o})}),o.videos.length===0?e(M,{description:"No data yet"}):e(L,{defaultActiveKey:"1",tabPosition:"top",className:"bg-slate-50 rounded p-4",items:o.videos.map((i,u)=>({label:r("div",{className:"flex gap-4",children:[e("p",{children:i.name}),r(C,{children:[e(m,{onClick:()=>y({group:i,name:o.name}),size:"small",type:"dashed",icon:e(v,{icon:k})}),e(m,{onClick:()=>c(i),size:"small",danger:!0,icon:e(v,{icon:F})})]})]}),key:i.id,disabled:u===28,children:e(f,{children:e(N,{videos:i.videos.map((h,g)=>({link:h,name:"video "+(g+1)}))})})}))}),e(q,{title:"Edit Videos",open:n,onCancel:a,footer:null,destroyOnClose:!0,children:s&&e(j,{group:s.group,name:s.name,close:a})})]})})}export{ce as default};
