import{u as V,a as e,j as s,F as h,a1 as I,a2 as b,d as v}from"./app.f827bd24.js";import{A as f,b as A}from"./Assets.4426f7a3.js";import{u as _,f as F,a as k,M as E,D as T}from"./useModal.48de5445.js";import S from"./Layout.af15a618.js";import{E as M}from"./index.0932827d.js";import{T as P}from"./index.2881bbbc.js";import{B as c}from"./button.76e5a0fb.js";import{F as t}from"./index.e2edf124.js";import{I as y}from"./index.0314e3f8.js";import{m as x}from"./index.953a42eb.js";import{f as q}from"./faCaretRight.0704a143.js";import{M as w}from"./MinusCircleOutlined.4e0cbee6.js";import{P as N}from"./PlusOutlined.1af1335f.js";import"./ImagesHandler.e7d6fa9d.js";import"./ActionButton.656695d9.js";import"./index.abe775bb.js";import"./type.728015f4.js";import"./getScrollBarSize.001053fa.js";import"./KeyCode.bb3c3291.js";import"./pickAttrs.8f7876d6.js";import"./Up.1face89a.js";import"./motion.b3bcf41a.js";import"./Dropdown.accde963.js";import"./index.92e459fd.js";import"./Overflow.62acccba.js";const D=({assets:i})=>{const[l]=t.useForm(),o=n=>{v.Inertia.post(f.insertVideos(),{...n,name:i.name,assets_type:i.assetsType},{onSuccess:()=>{l.resetFields(),x.success("Data uploaded Successfuly")}})};return s("div",{className:"rounded bg-slate-50 shadow-sm p-4 my-16",children:[s("span",{className:"mb-4 block",children:[e(b,{icon:q.faCaretRight})," Add new group video"]}),s(t,{form:l,name:"add_new_assets",className:"max-w-[500px] mx-auto",initialValues:{remember:!0},onFinish:o,autoComplete:"off",method:"post",encType:"multipart/form-data",children:[e(t.Item,{name:"group_name",rules:[{required:!0,message:"Please insert the name of the group"}],children:e(y,{placeholder:"Group Name"})}),e(T,{}),e(t.List,{name:"videos",children:(n,{add:p,remove:m},{errors:r})=>s(h,{children:[n.map((d,a)=>s(t.Item,{label:`Video no ${a+1}`,required:!0,children:[e(t.Item,{...d,validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,message:"Please input embed code here"}],noStyle:!0,children:e(y.TextArea,{placeholder:"Embed code",style:{width:"80%"}})}),e(w,{className:"dynamic-delete-button mx-2",onClick:()=>m(d.name)})]},d.key)),s(t.Item,{wrapperCol:{offset:6,span:16},children:[e(c,{type:"dashed",onClick:()=>p(),icon:e(N,{}),children:"Add video"}),e(t.ErrorList,{errors:r})]})]})}),e(t.Item,{children:e(c,{type:"primary",htmlType:"submit",children:"Submit"})})]})]})},L=({group:i,name:l,close:o})=>{const[n]=t.useForm();return s(t,{form:n,name:"edit_videos",className:"max-w-[500px] mx-auto",initialValues:{remember:!0},onFinish:m=>{v.Inertia.post(f.editVideos(),{...m,group_id:i.id,name:l,assets_type:A.videos},{onSuccess:()=>{n.resetFields(),x.success("Data uploaded Successfuly"),o()}})},autoComplete:"off",method:"post",encType:"multipart/form-data",children:[e(t.Item,{name:"group_name",initialValue:i.name,rules:[{required:!0,message:"Please insert the name of the group"}],children:e(y,{placeholder:"Group Name"})}),e(T,{}),e(t.List,{name:"videos",initialValue:i.videos,children:(m,{add:r,remove:d},{errors:a})=>s(h,{children:[m.map((u,g)=>s(t.Item,{label:`Video no ${g+1}`,required:!0,children:[e(t.Item,{...u,validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,message:"Please input embed code here"}],noStyle:!0,children:e(y.TextArea,{placeholder:"Embed code",style:{width:"80%"}})}),e(w,{className:"dynamic-delete-button mx-2",onClick:()=>d(u.name)})]},u.key)),s(t.Item,{wrapperCol:{offset:6,span:16},children:[e(c,{type:"dashed",onClick:()=>r(),icon:e(N,{}),children:"Add video"}),e(t.ErrorList,{errors:a})]})]})}),e(t.Item,{children:e(c,{type:"primary",htmlType:"submit",children:"Submit Changes"})})]})};function de({assetsDB:i}){V();const[{isOpen:l,data:o},n,p,m]=_(),r=new f(i),d=a=>v.Inertia.post(f.removeVideos(),{group_id:a.id,name:r.name,assets_type:r.assetsType});return e(S,{children:s(h,{children:[e(I,{children:e(D,{assets:r})}),r.videos.length===0?e(M,{description:"No data yet"}):e(P,{defaultActiveKey:"1",tabPosition:"left",className:"bg-slate-50 rounded p-4",items:r.videos.map((a,u)=>({label:s("div",{className:"flex gap-4",children:[e("p",{children:a.name}),s(I,{children:[e(c,{onClick:()=>m({group:a,name:r.name}),size:"small",type:"dashed",icon:e(b,{className:"text-gray-600",icon:F.faEdit})}),e(c,{onClick:()=>d(a),size:"small",danger:!0,icon:e(b,{icon:k.faTrash})})]})]}),key:a.id,disabled:u===28,children:e(h,{children:a.videos.map((g,C)=>e("div",{className:"rounded shadow p-4 bg-gray-100 my-4",children:e("div",{className:"meeting-iframe",dangerouslySetInnerHTML:{__html:g}},C)},C))})}))}),e(E,{title:"Edit Videos",open:l,onCancel:p,footer:null,destroyOnClose:!0,children:o&&e(L,{group:o.group,name:o.name,close:p})})]})})}export{de as default};
