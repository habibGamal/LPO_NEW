import{f as j}from"./faCaretRight.94301215.js";import{j as c,F as C,a,h as U,r as y,l as A,L as E,i as L}from"./app.89a6dfec.js";import{F as l}from"./index.16063b01.js";import{I as u}from"./index.c78a25b8.js";import{B as V}from"./button.b934859c.js";import{U as M}from"./index.0e890daa.js";import{P as z}from"./PlusOutlined.ebd7df2d.js";import{B as Y}from"./Book.7d109b31.js";import"./styleChecker.e2663219.js";import"./index.c5f0d56a.js";import"./type.65256fdc.js";import"./motion.6cae56f7.js";import"./index.c75451c8.js";import"./pickAttrs.d68e4c85.js";import"./useForceUpdate.69dff61c.js";import"./DeleteOutlined.4699a20c.js";import"./progress.af48b086.js";import"./CheckOutlined.03167fd0.js";(function(e){Object.defineProperty(e,"__esModule",{value:!0});var s="fas",i="caret-right",n=256,m=512,p=[],f="f0da",h="M246.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-128-128c-9.2-9.2-22.9-11.9-34.9-6.9s-19.8 16.6-19.8 29.6l0 256c0 12.9 7.8 24.6 19.8 29.6s25.7 2.2 34.9-6.9l128-128z";e.definition={prefix:s,iconName:i,icon:[n,m,p,f,h]},e.faCaretRight=e.definition,e.prefix=s,e.iconName=i,e.width=n,e.height=m,e.ligatures=p,e.unicode=f,e.svgPathData=h,e.aliases=p})(j);function q({id:e,count:s,removeVideo:i,video:n=null}){return console.log(e),c(C,{children:[a("hr",{}),c("h4",{className:"text-lg font-sans text-center my-4",children:["Video No ",s+1]}),a(l.Item,{label:"Video Name",name:`video_name[${e}]`,initialValue:n==null?void 0:n.name,children:a(u,{})}),a(l.Item,{label:"Video Link",name:`video_link[${e}]`,initialValue:n==null?void 0:n.link,children:a(u,{})}),a(l.Item,{wrapperCol:{offset:16,span:20},children:a(V,{onClick:m=>i(m,e),type:"link",danger:!0,children:"- Remove Video"})}),a("hr",{})]})}function $({book:e=null}){var N,F,w,S,B,_,P,D;const[s]=l.useForm(),{errors:i}=U().props,[n,m]=y.exports.useState((e==null?void 0:e.videos.map((t,r)=>r))||[]),[p,f]=y.exports.useState(e?e.videos.length-1:-1),h=t=>{t.preventDefault(),m(r=>[...r,p+1]),f(r=>r+1)},x=(t,r)=>{t.preventDefault(),m(v=>v.filter(g=>g!==r))},[d,I]=y.exports.useState(e?[{uid:"-1",name:e.coverName,status:"done",url:e.cover}]:[]),O={beforeUpload:t=>!1,maxCount:1,fileList:d,onChange:({fileList:t})=>{I(t)}},R=t=>{var r;L.Inertia.post("/books",{...t,cover:(r=d==null?void 0:d[0])==null?void 0:r.originFileObj},{errorBag:"-1",preserveScroll:!0,onSuccess:()=>{s.resetFields(),I([]),m([])}})},T=t=>{var g;const r={...t,_method:"put"},v=(g=d[0])==null?void 0:g.uid;v&&v!=="-1"&&(r.cover=d[0].originFileObj),L.Inertia.post(`/books/${e.id}`,r,{forceFormData:!0,errorBag:`${e.id}`,preserveScroll:!0})},o=()=>e?i==null?void 0:i[`${e.id}`]:i==null?void 0:i["-1"];return a(C,{children:c("div",{className:"rounded bg-gray-100 shadow-sm p-4",children:[a(A,{icon:j.faCaretRight})," ",e?e.name:"Add New Book",c(l,{form:s,name:"basic",className:"max-w-[500px] mx-auto",labelCol:{span:8},wrapperCol:{span:16},initialValues:{remember:!0},onFinish:e?T:R,autoComplete:"off",method:"post",encType:"multipart/form-data",children:[a(l.Item,{label:"Book Name",name:"name",initialValue:e==null?void 0:e.name,validateStatus:((N=o())==null?void 0:N.name)&&"error",help:(F=o())==null?void 0:F.name,children:a(u,{})}),a(l.Item,{label:"Cover",name:"cover",valuePropName:"fileList",validateStatus:((w=o())==null?void 0:w.cover)&&"error",help:(S=o())==null?void 0:S.cover,children:a(C,{children:a(M,{...O,listType:"picture-card",children:c("div",{children:[a(z,{}),a("div",{style:{marginTop:8},children:"Upload"})]})})})}),a(l.Item,{name:"pdf",label:"PDF Link",initialValue:e==null?void 0:e.pdf,validateStatus:((B=o())==null?void 0:B.pdf)&&"error",help:(_=o())==null?void 0:_.pdf,children:a(u,{})}),a(l.Item,{name:"playlist_id",label:"Youtube playlist id",validateStatus:((P=o())==null?void 0:P.playlist_id)&&"error",help:(D=o())==null?void 0:D.playlist_id,children:a(u,{})}),n.map((t,r)=>a(q,{id:t,video:e?e.videos[t]:null,count:r,removeVideo:x},t)),a(l.Item,{wrapperCol:{offset:16,span:20},children:a(V,{onClick:t=>h(t),type:"link",children:"+ Add Video"})}),a(l.Item,{wrapperCol:{offset:10,span:16},children:a(V,{type:"primary",htmlType:"submit",children:"Save"})})]}),e&&a(E,{href:`/books/${e.id}`,method:"delete",as:"button",className:"ant-btn ant-btn-link ant-btn-dangerous",children:"Delete"})]})})}function me({booksDB:e}){const s=e.map(i=>new Y(i));return c("div",{className:"container my-16 flex flex-col gap-4",children:[a($,{}),s.map(i=>a($,{book:i},i.id))]})}export{me as default};
