var b=Object.defineProperty;var S=(i,t,r)=>t in i?b(i,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[t]=r;var o=(i,t,r)=>(S(i,typeof t!="symbol"?t+"":t,r),r);import{R as v,a as n,j as u,d as x}from"./app.be9c2860.js";import{M as V}from"./Meeting.018e0e1b.js";import{B as g}from"./button.efb1e47f.js";import{T as y}from"./Table.572334f7.js";import{T as c}from"./index.3bd594b4.js";import{S as I}from"./index.c45913fa.js";import"./type.cde5cf85.js";import"./index.2c9fd0b6.js";import"./motion.b7a58cb8.js";import"./pickAttrs.3bef18f6.js";import"./index.92e459fd.js";import"./getScrollBarSize.001053fa.js";import"./useForceUpdate.a1e3b5de.js";import"./index.6cb164e8.js";import"./styleChecker.cfdd979f.js";import"./RightOutlined.1ad274b6.js";import"./debounce.9212fd4f.js";import"./index.c25d0eaf.js";import"./Dropdown.5c9003a3.js";import"./Overflow.0be19229.js";import"./KeyCode.bb3c3291.js";import"./index.712eb5dd.js";import"./CheckOutlined.c56b9568.js";class w{constructor(t){o(this,"id");o(this,"firstName");o(this,"secondName");o(this,"meetings");this.id=t.id,this.firstName=t.firstName,this.secondName=t.secondName,this.meetings=t.meetings}get meetingsArray(){return JSON.parse(this.meetings)}}function W({student:i,meetings:t}){const r=new w(i).meetingsArray;console.log(t);const p=t.map(e=>{var a;return{studentVideoNumber:(a=r.find(m=>m.meetingId===e.id))==null?void 0:a.videoNumber,meeting:new V(e)}}),[d,f]=v.useState(p),N=[{title:"Name",dataIndex:["meeting","name"]},{title:"State",dataIndex:["meeting","state"],render:e=>e==="offline"?n(c,{children:"Offline"}):n(c,{color:"green",children:"Online"})},{title:"Date",dataIndex:["meeting","date"]},{title:"Video Number",dataIndex:"",render:e=>{const a=e.meeting.videos.map((l,s)=>({value:s,label:s+1})),m=l=>{f(d.map(s=>(s.meeting.id===e.meeting.id&&(s.studentVideoNumber=l),s)))};return n(I,{defaultValue:e.studentVideoNumber,style:{width:120},onChange:m,options:[{value:-1,label:"Not Assigned"},...a]})}},{title:"Show Video",dataIndex:"",render:e=>{const a=e.studentVideoNumber!==void 0&&e.studentVideoNumber!==-1?e.meeting.videos[e.studentVideoNumber]:null;return a?n(g,{children:n("a",{href:`/show-meeting?embededLink=${a}`,target:"_blank",children:"Show Video"})}):n("span",{children:"Not Assigned"})}}],h=()=>{x.Inertia.post("/update-student-meetings",{id:i.id,meetings:JSON.stringify(d.map(e=>({meetingId:e.meeting.id,videoNumber:e.studentVideoNumber==null?null:e.studentVideoNumber})))})};return n("div",{className:"container",children:u("div",{className:"my-8",children:[u("h2",{className:"text-2xl lg:text-4xl my-8 font-sans",children:["Meetings of ",i.firstName," ",i.secondName]}),n(g,{onClick:h,className:"float-right",type:"primary",children:"Save"}),n(y,{pagination:!1,columns:N,dataSource:d})]})})}export{W as default};
