import{u as A,a as e,j as r,F as f,a1 as C,a2 as v,b as x,d as I}from"./app.3e5ea405.js";import{A as b,b as N}from"./Assets.4426f7a3.js";import{u as F,f as S,a as k,M as E,D as T}from"./useModal.68954504.js";import P from"./Layout.ed5cf365.js";import{V as q}from"./VideosScreen.f8fc5308.js";import{E as D}from"./index.ffe2678f.js";import{T as M}from"./index.8fa11751.js";import{B as m}from"./button.a85a9684.js";import{F as t}from"./index.f5125240.js";import{I as l}from"./index.6fb37660.js";import{m as V}from"./index.96bed16f.js";import{f as L}from"./faCaretRight.0704a143.js";import{M as _}from"./MinusCircleOutlined.5d77a869.js";import{P as w}from"./PlusOutlined.9040cc7d.js";import"./ImagesHandler.e7d6fa9d.js";import"./ActionButton.cce489f9.js";import"./index.4977b0a3.js";import"./type.0eceba64.js";import"./getScrollBarSize.001053fa.js";import"./KeyCode.bb3c3291.js";import"./pickAttrs.07874ac9.js";import"./Up.1face89a.js";import"./motion.9062cf43.js";import"./Dropdown.630b83e3.js";import"./index.92e459fd.js";import"./Overflow.a5f002e5.js";const O=({assets:d})=>{const[n]=t.useForm(),{errors:a}=x().props,p=s=>{I.Inertia.post(b.insertVideos(),{...s,name:d.name,assets_type:d.assetsType},{onSuccess:()=>{n.resetFields(),V.success("Data uploaded Successfuly")}})};return console.log(a),r("div",{className:"rounded bg-slate-50 shadow-sm p-4 my-16",children:[r("span",{className:"mb-4 block",children:[e(v,{icon:L.faCaretRight})," Add new group video"]}),r(t,{form:n,name:"add_new_assets",className:"max-w-[500px] mx-auto",initialValues:{remember:!0},onFinish:p,autoComplete:"off",method:"post",encType:"multipart/form-data",children:[e(t.Item,{name:"group_name",rules:[{required:!0,message:"Please insert the name of the group"}],children:e(l,{placeholder:"Group Name"})}),e(t.Item,{name:"playlist_id",validateStatus:(a==null?void 0:a.playlist_id)&&"error",help:a==null?void 0:a.playlist_id,children:e(l,{placeholder:"Playlist id"})}),e(T,{}),e(t.List,{name:"videos",children:(s,{add:y,remove:o},{errors:c})=>r(f,{children:[s.map((i,u)=>r(t.Item,{label:`Video no ${u+1}`,required:!0,children:[e(t.Item,{...i,validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,message:"Please input embed code here"}],noStyle:!0,children:e(l.TextArea,{placeholder:"Embed code",style:{width:"80%"}})}),e(_,{className:"dynamic-delete-button mx-2",onClick:()=>o(i.name)})]},i.key)),r(t.Item,{wrapperCol:{offset:6,span:16},children:[e(m,{type:"dashed",onClick:()=>y(),icon:e(w,{}),children:"Add video"}),e(t.ErrorList,{errors:c})]})]})}),e(t.Item,{children:e(m,{type:"primary",htmlType:"submit",children:"Submit"})})]})]})},B=({group:d,name:n,close:a})=>{const[p]=t.useForm(),{errors:s}=x().props;return r(t,{form:p,name:"edit_videos",className:"max-w-[500px] mx-auto",initialValues:{remember:!0},onFinish:o=>{I.Inertia.post(b.editVideos(),{...o,group_id:d.id,name:n,assets_type:N.videos},{onSuccess:()=>{p.resetFields(),V.success("Data uploaded Successfuly"),a()}})},autoComplete:"off",method:"post",encType:"multipart/form-data",children:[e(t.Item,{name:"group_name",initialValue:d.name,rules:[{required:!0,message:"Please insert the name of the group"}],children:e(l,{placeholder:"Group Name"})}),e(t.Item,{name:"playlist_id",validateStatus:(s==null?void 0:s.playlist_id)&&"error",help:s==null?void 0:s.playlist_id,children:e(l,{placeholder:"Playlist id"})}),e(T,{}),e(t.List,{name:"videos",initialValue:d.videos,children:(o,{add:c,remove:i},{errors:u})=>r(f,{children:[o.map((h,g)=>r(t.Item,{label:`Video no ${g+1}`,required:!0,children:[e(t.Item,{...h,validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,message:"Please input embed code here"}],noStyle:!0,children:e(l.TextArea,{placeholder:"Embed code",style:{width:"80%"}})}),e(_,{className:"dynamic-delete-button mx-2",onClick:()=>i(h.name)})]},h.key)),r(t.Item,{wrapperCol:{offset:6,span:16},children:[e(m,{type:"dashed",onClick:()=>c(),icon:e(w,{}),children:"Add video"}),e(t.ErrorList,{errors:u})]})]})}),e(t.Item,{children:e(m,{type:"primary",htmlType:"submit",children:"Submit Changes"})})]})};function ce({assetsDB:d}){A();const[{isOpen:n,data:a},p,s,y]=F(),o=new b(d),c=i=>I.Inertia.post(b.removeVideos(),{group_id:i.id,name:o.name,assets_type:o.assetsType});return e(P,{children:r(f,{children:[e(C,{children:e(O,{assets:o})}),o.videos.length===0?e(D,{description:"No data yet"}):e(M,{defaultActiveKey:"1",tabPosition:"top",className:"bg-slate-50 rounded p-4",items:o.videos.map((i,u)=>({label:r("div",{className:"flex gap-4",children:[e("p",{children:i.name}),r(C,{children:[e(m,{onClick:()=>y({group:i,name:o.name}),size:"small",type:"dashed",icon:e(v,{className:"text-gray-600",icon:S.faEdit})}),e(m,{onClick:()=>c(i),size:"small",danger:!0,icon:e(v,{icon:k.faTrash})})]})]}),key:i.id,disabled:u===28,children:e(f,{children:e(q,{videos:i.videos.map((h,g)=>({link:h,name:"video "+(g+1)}))})})}))}),e(E,{title:"Edit Videos",open:n,onCancel:s,footer:null,destroyOnClose:!0,children:a&&e(B,{group:a.group,name:a.name,close:s})})]})})}export{ce as default};
