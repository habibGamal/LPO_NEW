import{M as ce}from"./Meeting.018e0e1b.js";import{r as _,i as de,a as t,h as K,f as P,O as J,P as X,Q as Z,T as ee,M as pe,j as w,l as ue,k as me,a3 as ae,_ as fe,C as te,e as D,c as ve,F as Y,d as L,ak as B}from"./app.478912c7.js";import{h as he,D as Ce}from"./index.43da7029.js";import{I as V}from"./ImagesHandler.e7d6fa9d.js";import{F as b}from"./index.7707db40.js";import{I as U}from"./index.b5b4a8b3.js";import{S as F}from"./index.024baedd.js";import{U as ye}from"./index.196ef54e.js";import{c as q,B as z}from"./button.2ba20290.js";import{P as xe}from"./index.7ff280ae.js";import{P as H}from"./PlusOutlined.bd57e992.js";import{M as Ie}from"./MinusCircleOutlined.65022b89.js";import{R as be}from"./RightOutlined.4568a53a.js";import{s as j}from"./index.92e459fd.js";import{o as Pe}from"./type.550a9ab7.js";import{c as Ne}from"./motion.be4fae73.js";import"./index.ca1482f8.js";import"./index.e8033870.js";import"./KeyCode.bb3c3291.js";import"./styleChecker.024732f6.js";import"./pickAttrs.56b6f1a5.js";import"./Overflow.5d899496.js";import"./index.dcdb430e.js";import"./CheckOutlined.98ca12d8.js";import"./useForceUpdate.3b90b5f6.js";import"./DeleteOutlined.773ad49e.js";import"./progress.e3fe63e2.js";import"./ActionButton.efcb01c5.js";var re=_.exports.forwardRef(function(a,c){var r,s=a.prefixCls,e=a.forceRender,p=a.className,i=a.style,l=a.children,n=a.isActive,d=a.role,o=_.exports.useState(n||e),f=de(o,2),y=f[0],v=f[1];return _.exports.useEffect(function(){(e||n)&&v(!0)},[e,n]),y?t("div",{ref:c,className:K("".concat(s,"-content"),(r={},P(r,"".concat(s,"-content-active"),n),P(r,"".concat(s,"-content-inactive"),!n),r),p),style:i,role:d,children:t("div",{className:"".concat(s,"-content-box"),children:l})}):null});re.displayName="PanelContent";var Ae=["className","id","style","prefixCls","headerClass","children","isActive","destroyInactivePanel","accordion","forceRender","openMotion","extra","collapsible"],ne=function(a){J(r,a);var c=X(r);function r(){var s;Z(this,r);for(var e=arguments.length,p=new Array(e),i=0;i<e;i++)p[i]=arguments[i];return s=c.call.apply(c,[this].concat(p)),s.onItemClick=function(){var l=s.props,n=l.onItemClick,d=l.panelKey;typeof n=="function"&&n(d)},s.handleKeyPress=function(l){(l.key==="Enter"||l.keyCode===13||l.which===13)&&s.onItemClick()},s.renderIcon=function(){var l=s.props,n=l.showArrow,d=l.expandIcon,o=l.prefixCls,f=l.collapsible;if(!n)return null;var y=typeof d=="function"?d(s.props):t("i",{className:"arrow"});return y&&t("div",{className:"".concat(o,"-expand-icon"),onClick:f==="header"||f==="icon"?s.onItemClick:null,children:y})},s.renderTitle=function(){var l=s.props,n=l.header,d=l.prefixCls,o=l.collapsible;return t("span",{className:"".concat(d,"-header-text"),onClick:o==="header"?s.onItemClick:null,children:n})},s}return ee(r,[{key:"shouldComponentUpdate",value:function(e){return!j(this.props,e)}},{key:"render",value:function(){var e,p,i=this.props,l=i.className,n=i.id,d=i.style,o=i.prefixCls,f=i.headerClass,y=i.children,v=i.isActive,C=i.destroyInactivePanel,S=i.accordion,M=i.forceRender,$=i.openMotion,x=i.extra,N=i.collapsible,A=pe(i,Ae),u=N==="disabled",m=N==="header",h=N==="icon",k=K((e={},P(e,"".concat(o,"-item"),!0),P(e,"".concat(o,"-item-active"),v),P(e,"".concat(o,"-item-disabled"),u),e),l),g=K("".concat(o,"-header"),(p={},P(p,f,f),P(p,"".concat(o,"-header-collapsible-only"),m),P(p,"".concat(o,"-icon-collapsible-only"),h),p)),I={className:g,"aria-expanded":v,"aria-disabled":u,onKeyPress:this.handleKeyPress};!m&&!h&&(I.onClick=this.onItemClick,I.role=S?"tab":"button",I.tabIndex=u?-1:0);var R=x!=null&&typeof x!="boolean";return delete A.header,delete A.panelKey,delete A.onItemClick,delete A.showArrow,delete A.expandIcon,w("div",{...A,className:k,style:d,id:n,children:[w("div",{...I,children:[this.renderIcon(),this.renderTitle(),R&&t("div",{className:"".concat(o,"-extra"),children:x})]}),t(ue,{visible:v,leavedClassName:"".concat(o,"-content-hidden"),...$,forceRender:M,removeOnLeave:C,children:function(E,T){var le=E.className,ie=E.style;return t(re,{ref:T,prefixCls:o,className:le,style:ie,isActive:v,forceRender:M,role:S?"tabpanel":null,children:y})}})]})}}]),r}(_.exports.Component);ne.defaultProps={showArrow:!0,isActive:!1,onItemClick:function(){},headerClass:"",forceRender:!1};function Q(a){var c=a;if(!Array.isArray(c)){var r=fe(c);c=r==="number"||r==="string"?[c]:[]}return c.map(function(s){return String(s)})}var O=function(a){J(r,a);var c=X(r);function r(s){var e;Z(this,r),e=c.call(this,s),e.onClickItem=function(n){var d=e.state.activeKey;if(e.props.accordion)d=d[0]===n?[]:[n];else{d=me(d);var o=d.indexOf(n),f=o>-1;f?d.splice(o,1):d.push(n)}e.setActiveKey(d)},e.getNewChild=function(n,d){if(!n)return null;var o=e.state.activeKey,f=e.props,y=f.prefixCls,v=f.openMotion,C=f.accordion,S=f.destroyInactivePanel,M=f.expandIcon,$=f.collapsible,x=n.key||String(d),N=n.props,A=N.header,u=N.headerClass,m=N.destroyInactivePanel,h=N.collapsible,k=!1;C?k=o[0]===x:k=o.indexOf(x)>-1;var g=h!=null?h:$,I={key:x,panelKey:x,header:A,headerClass:u,isActive:k,prefixCls:y,destroyInactivePanel:m!=null?m:S,openMotion:v,accordion:C,children:n.props.children,onItemClick:g==="disabled"?null:e.onClickItem,expandIcon:M,collapsible:g};return typeof n.type=="string"?n:(Object.keys(I).forEach(function(R){typeof I[R]>"u"&&delete I[R]}),_.exports.cloneElement(n,I))},e.getItems=function(){var n=e.props.children;return ae(n).map(e.getNewChild)},e.setActiveKey=function(n){"activeKey"in e.props||e.setState({activeKey:n}),e.props.onChange(e.props.accordion?n[0]:n)};var p=s.activeKey,i=s.defaultActiveKey,l=i;return"activeKey"in s&&(l=p),e.state={activeKey:Q(l)},e}return ee(r,[{key:"shouldComponentUpdate",value:function(e,p){return!j(this.props,e)||!j(this.state,p)}},{key:"render",value:function(){var e,p=this.props,i=p.prefixCls,l=p.className,n=p.style,d=p.accordion,o=K((e={},P(e,i,!0),P(e,l,!!l),e));return t("div",{className:o,style:n,role:d?"tablist":null,children:this.getItems()})}}],[{key:"getDerivedStateFromProps",value:function(e){var p={};return"activeKey"in e&&(p.activeKey=Q(e.activeKey)),p}}]),r}(_.exports.Component);O.defaultProps={prefixCls:"rc-collapse",onChange:function(){},accordion:!1,destroyInactivePanel:!1};O.Panel=ne;O.Panel;var _e=function(c){var r=_.exports.useContext(te),s=r.getPrefixCls,e=c.prefixCls,p=c.className,i=p===void 0?"":p,l=c.showArrow,n=l===void 0?!0:l,d=s("collapse",e),o=K(P({},"".concat(d,"-no-arrow"),!n),i);return t(O.Panel,{...c,prefixCls:d,className:o})};const ke=_e;var se=function(c){var r,s=_.exports.useContext(te),e=s.getPrefixCls,p=s.direction,i=c.prefixCls,l=c.className,n=l===void 0?"":l,d=c.bordered,o=d===void 0?!0:d,f=c.ghost,y=c.expandIconPosition,v=y===void 0?"start":y,C=e("collapse",i),S=_.exports.useMemo(function(){return v==="left"?"start":v==="right"?"end":v},[v]),M=function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},m=c.expandIcon,h=m?m(u):t(be,{rotate:u.isActive?90:void 0});return q(h,function(){return{className:K(h.props.className,"".concat(C,"-arrow"))}})},$=K("".concat(C,"-icon-position-").concat(S),(r={},P(r,"".concat(C,"-borderless"),!o),P(r,"".concat(C,"-rtl"),p==="rtl"),P(r,"".concat(C,"-ghost"),!!f),r),n),x=D(D({},Ne),{motionAppear:!1,leavedClassName:"".concat(C,"-content-hidden")}),N=function(){var u=c.children;return ae(u).map(function(m,h){var k;if(!((k=m.props)===null||k===void 0)&&k.disabled){var g=m.key||String(h),I=m.props,R=I.disabled,E=I.collapsible,T=D(D({},Pe(m.props,["disabled"])),{key:g,collapsible:E!=null?E:R?"disabled":void 0});return q(m,T)}return m})};return t(O,{openMotion:x,...c,expandIcon:M,prefixCls:C,className:$,children:N()})};se.Panel=ke;const oe=se;function W({meeting:a=null}){var f,y,v,C,S,M,$,x,N,A;const[c]=b.useForm(),{errors:r}=ve().props,[s,e]=_.exports.useState(a?V.getPathsAsUploadFiles(a.assets):[]),[p,i]=_.exports.useState([]);_.exports.useEffect(()=>{a&&(e(V.getPathsAsUploadFiles(a.assets)),i([]))},[a]);const l={beforeUpload:u=>!1,fileList:s,multiple:!0,onChange:({fileList:u})=>{e(u)},onRemove:u=>{i(m=>[...m,u.name])}},n=u=>{L.Inertia.post("/meetings",{...u,date:u!=null&&u.date?u.date.format("YYYY-MM-DD"):null,assets:s.map(m=>m.originFileObj)},{errorBag:"-1",preserveScroll:!0,forceFormData:!0,onSuccess:()=>{B.success("Meeting has been added succesfuly"),c.resetFields(),e([])}})},d=u=>{var h;const m={...u,assets:V.getNewUploadedFiles(s),date:(h=u==null?void 0:u.date)==null?void 0:h.format("YYYY-MM-DD"),removedAssets:p,_method:"put"};console.log(m),L.Inertia.post(`/meetings/${a.id}`,m,{forceFormData:!0,errorBag:`${a.id}`,preserveScroll:!0,onSuccess:()=>{B.success("Meeting updated succesfuly")}})},o=()=>a?r==null?void 0:r[`${a.id}`]:r==null?void 0:r["-1"];return w(Y,{children:[w(b,{form:c,name:a?`edit_${a.id}`:"new",className:"mt-4 max-w-[500px] mx-auto",layout:"vertical",initialValues:{remember:!0},onFinish:a?d:n,autoComplete:"off",method:"post",encType:"multipart/form-data",children:[t(b.Item,{label:"Meeting Name",name:"name",initialValue:a==null?void 0:a.name,validateStatus:((f=o())==null?void 0:f.name)&&"error",help:(y=o())==null?void 0:y.name,children:t(U,{})}),t(b.Item,{label:"Meeting Link",name:"meeting_link",initialValue:a==null?void 0:a.link,validateStatus:((v=o())==null?void 0:v.meeting_link)&&"error",help:(C=o())==null?void 0:C.meeting_link,children:t(U,{})}),t(b.Item,{label:"Meeting Date",name:"date",initialValue:a?he(a.date):"",validateStatus:((S=o())==null?void 0:S.date)&&"error",help:(M=o())==null?void 0:M.date,children:t(Ce,{})}),t(b.Item,{label:"Meeting State",name:"state",initialValue:a==null?void 0:a.state,validateStatus:(($=o())==null?void 0:$.state)&&"error",help:(x=o())==null?void 0:x.state,children:w(F,{placeholder:"Select state",children:[t(F.Option,{value:"not_started",children:"Not Started"}),t(F.Option,{value:"in_meeting",children:"In Meeting"}),t(F.Option,{value:"ended",children:"Ended"}),t(F.Option,{value:"offline",children:"Offline"})]})}),t(b.Item,{label:"Assets",name:"assets[]",valuePropName:"fileList",children:t(Y,{children:t(ye,{...l,listType:"picture-card",children:w("div",{children:[t(H,{}),t("div",{style:{marginTop:8},children:"Upload"})]})})})}),t(b.Item,{name:"playlist_id",label:"Youtube playlist id",validateStatus:((N=o())==null?void 0:N.playlist_id)&&"error",help:(A=o())==null?void 0:A.playlist_id,children:t(U,{})}),t(b.List,{name:"videos",initialValue:a==null?void 0:a.videos,children:(u,{add:m,remove:h},{errors:k})=>w(Y,{children:[u.map((g,I)=>w(b.Item,{label:`Video no ${I+1}`,required:!0,children:[t(b.Item,{...g,validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,message:"Please input embed code here"}],noStyle:!0,children:t(U,{placeholder:"Embed code",style:{width:"80%"}})}),t(Ie,{className:"dynamic-delete-button mx-2",onClick:()=>h(g.name)})]},g.key)),w(b.Item,{wrapperCol:{offset:6,span:16},children:[t(z,{type:"dashed",onClick:()=>m(),icon:t(H,{}),children:"Add video"}),t(b.ErrorList,{errors:k})]})]})}),t(b.Item,{wrapperCol:{offset:10,span:16},children:t(z,{type:"primary",htmlType:"submit",children:"Save"})})]}),a&&t(xe,{title:"Are you sure to delete this meeting?",onConfirm:()=>L.Inertia.delete(`/meetings/${a.id}`),okText:"Yes",cancelText:"No",children:t("span",{className:"ant-btn ant-btn-link ant-btn-dangerous",children:"Delete"})})]})}const{Panel:G}=oe;function aa({meetingsDB:a}){const c=a.map(r=>new ce(r));return t("div",{className:"container my-16 flex flex-col gap-4",children:w(oe,{defaultActiveKey:["-1"],onChange:()=>{},children:[t(G,{header:"Make New Meeting",children:t(W,{})},"-1"),c.map(r=>t(G,{header:r.name,children:t(W,{meeting:r},r.id)},r.id))]})})}export{aa as default};
